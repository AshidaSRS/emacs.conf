#+TITLE: Modelo Conceptual
#+AUTHOR: Alberto Revuelta \and Francisco Santos \and Roberto Sarmiento \and David Zamora
#+OPTIONS: toc:nil
\newpage
#+TOC: headlines 3
\newpage
#+STARTUP: align

* Introducción
En esta práctica hemos realizado un diseño de una arquitectura de
software para una aplicación de gestión de congresos. Esta entrega se
basa en el modelo de gramática UML y consta de un diagrama de
perspectiva lógica, el cual muestra las capas de nuestra arquitectura,
un diagrama de perspectiva física en el que mostramos de forma
genérica y coincidiendo con el diagrama lógico, los componentes de la
arquitectura y por último dos diagramas de secuencia en los que
diferenciamos el uso por parte del usuario de una aplicación móvil o
de una interfaz web para interactuar con el sistema.
* Definición de la solución
#+BEGIN_SRC plantuml :file general_diagram.png
agent "Usuario"
agent "Servidor Web / Aplicaciones"
agent "Servidor Base de Datos"

Usuario <-> [Servidor Web / Aplicaciones]
[Servidor Web / Aplicaciones] <-> [Servidor Base de Datos]
#+END_SRC

#+RESULTS:
[[file:general_diagram.png]]
** Descripción del propósito del sistema
Basándonos en las especificaciones de necesidades del sistema, un
usuario tiene que ser capaz de poder consultar y modificar datos a
través de una interfaz móvil o una interfaz web. Es necesario que el
comportamiento del sistema sea el mismo en ambos casos, aunque la
interfaz de usuario sea distinta. Además, el sistema debe ser
multiusuario y la lógica principal de la aplicación no debe estar
repetida.

** Componentes
Los componentes del sistema se irán describiendo a lo largo del
documento y en los distintos diagramas. Antes de ello, se explicarán
las distintas decisiones de diseño tomadas
|---+---------------------------------+---------------------------------------------------|
|   | Decisiones de diseño            | Argumentos, justificaciones                       |
|---+---------------------------------+---------------------------------------------------|
| / | <>                              | <>                                                |
| # | Estilo arquitectónico por capas | Nos hemos basado en un estilo                     |
| # |                                 | arquitectónico por capas que                      |
| # |                                 | nos van a permitir aislar las                     |
| # |                                 | responsabilidades del sistema.                    |
| # |                                 | Identificamos 3 capas en nuestro sistema;         |
| # |                                 | la capa de presentación, la capa de negocio       |
| # |                                 | y la capa de datos. Este diseño permitirá         |
| # |                                 | hacer cambios en la interfaz y asignar            |
| # |                                 | trabajos de manera simple, ya que el              |
| # |                                 | desarrollo se lleva a cabo en varios              |
| # |                                 | niveles independientes, provocando                |
| # |                                 | que un cambio en un nivel no influya en el resto. |
|---+---------------------------------+---------------------------------------------------|
| # | Estilo de 3 capas               | Este sistema se estructura desde un punto de      |
| # |                                 | vista de implementación, en donde las capas       |
| # |                                 | lógicas coinciden con las físicas.                |
| # |                                 | Gracias a esto, se mejorará la facilidad          |
| # |                                 | de escalado del sistema, el mantenimiento         |
| # |                                 | y la seguridad del mismo.                         |
|---+---------------------------------+---------------------------------------------------|
| # | JRuby y Ruby on Rails           | Se utilizarán Frameworks conocidos                |
| # |                                 | por el equipo de desarrollo,                      |
| # |                                 | consiguiendo así una implementación más eficaz.   |
|---+---------------------------------+---------------------------------------------------|
** Perspectivas y diagramas de secuencias
*** Diagrama lógico
#+BEGIN_SRC plantuml :file logic_diagram.png
left to right direction
rectangle "Diagrama lógico" {
  package "Capa de Presentación" as CP{
    agent "UI Web"
    agent "UI Móvil"
    agent "Servicios Web"
    [UI Web]-[hidden]-[UI Móvil]
  }
  package "Capa de Negocio" as CN{
    agent "Componentes Web"
    agent "Fachada de la aplicación"
    agent "Entidades Web"
  }
  package "Capa de Datos" as CD{
    agent "Componentes de acceso a datos"
    agent "Agentes de servicio"
    [Componentes de acceso a datos]-[hidden]-[Agentes de servicio]
  }
  database "Base de datos local" as DB
}
[Servicios]
#+END_SRC

#+RESULTS:
[[file:logic_diagram.png
]]

A través de la perspectiva lógica se muestran las capas de la
arquitectura, además se indicará el nombre y la responsabilidad de
cada capa.
|---+----------------------+--------------------------+------------------|
|   | Elemento             | Responsabilidad          | Propiedades      |
|---+----------------------+--------------------------+------------------|
| / | <>                   | <>                       | <>               |
| # | Capa de Presentación | Esta capa se encarga     | Lenguaje = JRuby |
| # |                      | de mostrar por pantalla  | Framework = RoR¹ |
| # |                      | los resultados al        |                  |
| # |                      | usuario e interactuar    |                  |
| # |                      | con él. Esta capa se     |                  |
| # |                      | comunica únicamente      |                  |
| # |                      | con la capa de negocio   |                  |
|---+----------------------+--------------------------+------------------|
| # | Capa de Negocio      | Esta capa lleva a cabo   | Lenguaje = JRuby |
| # |                      | la ejecución de los      | Framework = RoR  |
| # |                      | casos de uso del         |                  |
| # |                      | sistema englobando       |                  |
| # |                      | todos los componentes    |                  |
| # |                      | de coordinación del      |                  |
| # |                      | mismo. Es donde          |                  |
| # |                      | residen los programas    |                  |
| # |                      | que se ejecutan,         |                  |
| # |                      | reciben las peticiones   |                  |
| # |                      | del usuario y se envían  |                  |
| # |                      | las respuestas tras el   |                  |
| # |                      | proceso.                 |                  |
|---+----------------------+--------------------------+------------------|
| # | Capa de Datos        | En esta capa es donde    | Leguaje = JRuby  |
| # |                      | residen los datos y es   | Framework = RoR  |
| # |                      | la encargada de          |                  |
| # |                      | acceder a los mismos.    |                  |
| # |                      | Está formada por una     |                  |
| # |                      | base de datos relacional |                  |
|---+----------------------+--------------------------+------------------|
¹. Ruby on Rails
*** Diagrama físico
#+BEGIN_SRC plantuml :file phisical_diagram.png
left to right direction
rectangle "Physical Diagram" {
skinparam componentStyle uml2
agent "Usuario Web" as UW
agent "Dispositivo móvil" as DM
agent "Sistema externo" as SE
node "Servidor Web" as N1 {
  [<<capa>>\nPresentación]
}
node "Servidor aplicaciones" as N2 {
  [<<capa>>\nNegocio]
  [<<capa>>\nDatos]
}
node "Servidor base de datos" as N3
UW - N1
DM - N1
SE - N1
N1 - N2
N2 - N3
}
#+END_SRC

#+RESULTS:
[[file:phisical_diagram.png]]

A través de la perspectiva física se muestran de forma genérica los
componentes de la arquitectura. 

|---+--------------+-------------------------+--------------------|
|   | Elemento     | Responsabilidad         | Propiedades        |
|---+--------------+-------------------------+--------------------|
| / | <>           | <>                      | <>                 |
| # | Usuario Web  | Interfaz de usuario web | Navegadores:       |
| # |              | a través la cual los    | + Safari 8+        |
| # |              | usuarios y los          | + Chrome 32+       |
| # |              | administradores del     | + Firefox 11+      |
| # |              | sistema pueden          |                    |
| # |              | acceder al servicio.    |                    |
|---+--------------+-------------------------+--------------------|
| # | Dispositivo  | Dispositivo móvil a     | Android 4.4+       |
| # | Móvil        | través del cual el      | iOS 7+             |
| # |              | usuario accederá a la   | Windows Phone 8.1+ |
| # |              | aplicación              |                    |
|---+--------------+-------------------------+--------------------|
| # | Sistema      | Sistema externo que     |                    |
| # | Externo      | interactúa con el       |                    |
| # |              | sistema desarrollado    |                    |
| # |              | mediante servicios web. |                    |
|---+--------------+-------------------------+--------------------|
| # | Servidor     | El servidor web alberga | HTTPWEBrick        |
| # | Web          | la capa de presentación |                    |
|---+--------------+-------------------------+--------------------|
| # | Servidor de  | El servidor de          | HTTPWEBrick        |
| # | aplicaciones | aplicaciones alberga la |                    |
| # |              | capa de negocio y la    |                    |
| # |              | capa de datos.          |                    |
|---+--------------+-------------------------+--------------------|
| # | Servidor     | El servidor BD alberga  | sqlite3            |
| # | BBDD         | la base de datos        |                    |
| # |              | relacional.             |                    |
|---+--------------+-------------------------+--------------------|

*** Diagramas de secuencias - Iteración de un usuario desde la interfaz web
#+BEGIN_SRC plantuml :file sequencial1_diagram.png
Usuario -> "UI Web": Consultar(dato)
activate  "UI Web"
note left
  Usuario
  Externo
end note

box "Capa de Presentación" #LightBlue
  participant "UI Web"
end box
box "Servidor de aplicaciones" #LightGreen
  participant "Servidor aplicaciones"
end box
box "Servidor base de datos" #LightGrey
  participant "Base de datos"
end box

"UI Web" -> "Servidor aplicaciones": buscar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": buscar(dato)

"Base de datos" -> "Base de datos": buscar(dato)

"Base de datos" --> "Servidor aplicaciones": <Dato>
deactivate "Servidor aplicaciones"
note left: Procesamiento de Datos

"Servidor aplicaciones" --> "UI Web": <Dato>

"UI Web" -> "Servidor aplicaciones": seleccionar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": seleccionar(dato)

"Base de datos" -> "Base de datos": seleccionar(dato)

"Base de datos" --> "Servidor aplicaciones": <Detalles Dato>
deactivate "Servidor aplicaciones"

"Servidor aplicaciones" --> "UI Web": <Detalles Dato>

"UI Web" -> "Servidor aplicaciones": modificar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": modificar(dato)

"Base de datos" -> "Base de datos": modificar(dato)

"Base de datos" --> "Servidor aplicaciones": Done
deactivate "Servidor aplicaciones"

"Servidor aplicaciones" --> "UI Web": Done

"UI Web" -> Usuario: Done
deactivate "UI Web"
#+END_SRC

#+RESULTS:
[[file:sequencial1_diagram.png]]

*** Diagrama de secuencia - Iteración de un usuario desde la interfaz móvil
#+BEGIN_SRC plantuml :file sequencial2_diagram.png
Usuario -> "UI Móvil": Consultar(dato)
activate  "UI Móvil"
note left
  Usuario
  Externo
end note

box "Capa de Presentación" #Pink
  participant "UI Móvil"
end box
box "Servidor de aplicaciones" #LightGreen
  participant "Servidor aplicaciones"
end box
box "Servidor base de datos" #LightGrey
  participant "Base de datos"
end box


"UI Móvil" -> "Servidor aplicaciones": buscar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": buscar(dato)

"Base de datos" -> "Base de datos": buscar(dato)

"Base de datos" --> "Servidor aplicaciones": <Dato>
deactivate "Servidor aplicaciones"
note left: Procesamiento de Datos

"Servidor aplicaciones" --> "UI Móvil": <Dato>

"UI Móvil" -> "Servidor aplicaciones": seleccionar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": seleccionar(dato)

"Base de datos" -> "Base de datos": seleccionar(dato)

"Base de datos" --> "Servidor aplicaciones": <Detalles Dato>
deactivate "Servidor aplicaciones"

"Servidor aplicaciones" --> "UI Móvil": <Detalles Dato>

"UI Móvil" -> "Servidor aplicaciones": modificar(dato)
activate "Servidor aplicaciones"

"Servidor aplicaciones" -> "Base de datos": modificar(dato)

"Base de datos" -> "Base de datos": modificar(dato)

"Base de datos" --> "Servidor aplicaciones": Done
deactivate "Servidor aplicaciones"

"Servidor aplicaciones" --> "UI Móvil": Done

"UI Móvil" -> Usuario: Done
deactivate "UI Móvil"
#+END_SRC

#+RESULTS:
[[file:sequencial2_diagram.png]]

